# FastAPI WebSocket

## Установка и запуск
1) Установить `python` и `pip` с <a href="https://www.python.org/">официального сайта</a>  
2) Создать виртуальное окружение и установить зависимости из requirements.txt:
```
python3 -m venv venv

source venv/bin/activate

pip3 install -r requirements.txt
```
3) Поднять сервер (изначально порт 8888, меняется флагом `--port`):
```
uvicorn api:app --host 0.0.0.0 --port 8888
```
4) Открыть <a href="http://localhost:8888/">страницу проекта</a> 

## Комментарии

 - Счетчик сообщений обновляется на серверной стороне и обнуляется при переподключении к вебсокету благодоря реинициализации переменной `message_id`
  - Как выглядит json:

    **request**:
    ```
    {
        "msg": "message text...",
    }
    ```
    **response**:
    ```
    {
        "msg": "message text...",
        "id": "message id..."
    }
    ```
 - При обрыве соединения, что можно проверить остановив сервер, через 5 секунд таймаута на главной странице появится сообщение `You are disconnected`. Это работает благодаря тому что сервер и страница играют в `__ping__` <-> `__pong__`
